(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2759:function(e,t,n){Promise.resolve().then(n.bind(n,4571))},4571:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var l=n(7437),s=n(2265),i=n(102);function o(){let e=(0,s.useRef)(null),[t,n]=(0,s.useState)(null),[o,a]=(0,s.useState)(!1),[r,h]=(0,s.useState)("#000000"),[c,u]=(0,s.useState)(3),[d,x]=(0,s.useState)([]),[p,v]=(0,s.useState)([]),[b,f]=(0,s.useState)({color:"#000000",lineWidth:3,brush:"solid"}),[g,m]=(0,s.useState)(null),[y,j]=(0,s.useState)(""),[k,S]=(0,s.useState)(20),[w,C]=(0,s.useState)(!1),[T,E]=(0,s.useState)(null),[N,P]=(0,s.useState)(!1),[D,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=e.current;if(t){t.width=900,t.height=500;let e=t.getContext("2d");n(e),_(e)}},[d]);let L=e=>{u(e),f({...b,lineWidth:e})},W=e=>{f({...b,brush:e})},R=e=>{m(e)},_=e=>{d.forEach(t=>{let{shape:n,startPoint:l,endPoint:s,style:i,text:o,position:a,path:r}=t;if(e.strokeStyle=i.color,e.lineWidth=i.lineWidth,"solid"===i.brush?(e.lineCap="round",e.lineJoin="round",e.setLineDash([])):"dotted"===i.brush?e.setLineDash([5,15]):"dashed"===i.brush&&e.setLineDash([10,10]),n)switch(n){case"rectangle":e.strokeRect(l.x,l.y,s.x-l.x,s.y-l.y);break;case"circle":let h=Math.sqrt(Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2));e.beginPath(),e.arc(l.x,l.y,h,0,2*Math.PI),e.stroke();break;case"line":e.beginPath(),e.moveTo(l.x,l.y),e.lineTo(s.x,s.y),e.stroke()}else o?(e.font="".concat(k,"px Arial"),e.fillStyle=i.color,e.fillText(o,a.x,a.y)):r&&(e.beginPath(),"solid"===i.brush?(e.lineCap="round",e.lineJoin="round"):"dotted"===i.brush?e.setLineDash([5,15]):"dashed"===i.brush&&e.setLineDash([10,10]),r.forEach((t,n)=>{0===n?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)}),e.stroke())})},X=t=>{t.strokeStyle="#ddd",t.lineWidth=.5;for(let n=0;n<e.current.width;n+=20)t.beginPath(),t.moveTo(n,0),t.lineTo(n,e.current.height),t.stroke();for(let n=0;n<e.current.height;n+=20)t.beginPath(),t.moveTo(0,n),t.lineTo(e.current.width,n),t.stroke()};return(0,l.jsxs)("div",{children:[(0,l.jsx)("canvas",{ref:e,onMouseDown:e=>{t&&(E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}),a(!0),null===g&&(t.beginPath(),t.moveTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY)))},onMouseMove:n=>{if(!o||!t)return;let l=n.nativeEvent.offsetX,s=n.nativeEvent.offsetY;if(t.clearRect(0,0,e.current.width,e.current.height),D&&X(t),_(t),t.strokeStyle=b.color,t.lineWidth=b.lineWidth,g)switch(g){case"rectangle":t.strokeRect(T.x,T.y,l-T.x,s-T.y);break;case"circle":let i=Math.sqrt(Math.pow(l-T.x,2)+Math.pow(s-T.y,2));t.beginPath(),t.arc(T.x,T.y,i,0,2*Math.PI),t.stroke();break;case"line":t.beginPath(),t.moveTo(T.x,T.y),t.lineTo(l,s),t.stroke()}else y?(t.font="".concat(k,"px Arial"),t.fillStyle=b.color,t.fillText(y,l,s)):(t.beginPath(),"solid"===b.brush?(t.lineCap="round",t.lineJoin="round"):"dotted"===b.brush?t.setLineDash([5,15]):"dashed"===b.brush&&t.setLineDash([10,10]),t.lineTo(l,s),t.stroke(),v([...p,{x:l,y:s}]))},onMouseUp:e=>{a(!1),T&&g?(x([...d,{shape:g,startPoint:T,endPoint:{x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},style:b}]),E(null)):y?(x([...d,{text:y,position:{x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},style:b}]),j(""),C(!1)):p.length>0&&x([...d,{path:p,style:b}]),v([])},style:{border:"1px solid #000"}}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("button",{className:"bg-blue-700 text-white px-3 py-2 rounded mr-2",onClick:()=>P(!N),children:"Select Color"}),N&&(0,l.jsx)(i.xS,{color:r,onChangeComplete:e=>{h(e.hex),f({...b,color:e.hex}),P(!1)}}),(0,l.jsx)("button",{className:"bg-green-700 text-white px-3 py-2 rounded mr-2",onClick:()=>{let t=e.current,n=document.createElement("a");n.download="whiteboard.png",n.href=t.toDataURL(),n.click()},children:"Save Drawing"}),(0,l.jsx)("button",{className:"bg-red-700 text-white px-3 py-2 rounded mr-2",onClick:()=>{x([]),v([]),e.current.getContext("2d").clearRect(0,0,e.current.width,e.current.height)},children:"Clear"}),(0,l.jsx)("button",{className:"bg-yellow-700 text-white px-3 py-2 rounded mr-2",onClick:()=>{if(d.length>0){let e=[...d];e.pop(),x(e)}},children:"Undo"})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"mr-2",children:"Line Width:"}),(0,l.jsx)("input",{type:"number",value:c,onChange:e=>L(e.target.value),min:"1",max:"10"}),(0,l.jsx)("label",{className:"ml-4 mr-2",children:"Brush Type:"}),(0,l.jsxs)("select",{onChange:e=>W(e.target.value),children:[(0,l.jsx)("option",{value:"solid",children:"Solid"}),(0,l.jsx)("option",{value:"dotted",children:"Dotted"}),(0,l.jsx)("option",{value:"dashed",children:"Dashed"})]}),(0,l.jsx)("label",{className:"ml-4 mr-2",children:"Shape:"}),(0,l.jsxs)("select",{onChange:e=>R(e.target.value),children:[(0,l.jsx)("option",{value:null,children:"Freehand"}),(0,l.jsx)("option",{value:"rectangle",children:"Rectangle"}),(0,l.jsx)("option",{value:"circle",children:"Circle"}),(0,l.jsx)("option",{value:"line",children:"Line"})]}),(0,l.jsx)("button",{className:"bg-gray-700 text-white px-3 py-2 rounded ml-4",onClick:()=>M(!D),children:"Toggle Grid"})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"mr-2",children:"Text:"}),(0,l.jsx)("input",{type:"text",value:y,onChange:e=>j(e.target.value)}),(0,l.jsx)("label",{className:"ml-4 mr-2",children:"Font Size:"}),(0,l.jsx)("input",{type:"number",value:k,onChange:e=>S(e.target.value),min:"10",max:"50"}),(0,l.jsx)("button",{className:"bg-purple-700 text-white px-3 py-2 rounded ml-4",onClick:()=>C(!w),children:"Toggle Text Input"})]})]})}}},function(e){e.O(0,[102,971,23,744],function(){return e(e.s=2759)}),_N_E=e.O()}]);